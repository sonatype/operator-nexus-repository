suite: test storage class
templates:
  - storage-class.yaml
values:
  - test-values.yaml
release:
  name: "test-release"
chart:
  version: "latest"
tests:
  - it: should use local storage
    set:
      nexusData:
        local:
          enabled: true
        nfs:
          enabled: false
    asserts:
      - isKind:
          of: StorageClass
      - equal:
          path: metadata.name
          value: "nxrm-ha-latest-test-release-test-nexus-repo-storage"

      - equal:
          path: metadata.namespace
          value: "test-nexusrepo"

      - equal:
          path: provisioner
          value: "kubernetes.io/no-provisioner"

      - equal:
          path: volumeBindingMode
          value: "WaitForFirstConsumer"

      - equal:
          path: reclaimPolicy
          value: "Retain"
