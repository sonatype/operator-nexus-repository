suite: test creation of config map containing commands for creating local work directory when using a local Persistent Volume
templates:
  - local-workdir-configmap.yaml
release:
  name: "test-release"
chart:
  version: "latest"
tests:
  - it: should create config map containing commands for creating local work directory when using a local Persistent Volume
    set:
      nexusData:
        local:
          enabled: true
        nfs:
          enabled: false
      statefulset:
        replicaCount: 3
    asserts:
      - isKind:
          of: ConfigMap
      - equal:
          path: metadata.namespace
          value: "nexusrepo"
      - equal:
          path: metadata.name
          value: "nxrm-ha-latest-test-release-create-nexus-workdir-config"
      - equal:
          path: data
          value:
            create-nexus-work-dir.sh: |
              #!/bin/bash
              # Make Nexus Repository Manager work directory
              mkdir -p /nexus-repo-mgr-work-dir/work0
              mkdir -p /nexus-repo-mgr-work-dir/work1
              mkdir -p /nexus-repo-mgr-work-dir/work2
