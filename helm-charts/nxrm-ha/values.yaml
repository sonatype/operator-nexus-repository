# DO NOT MODIFY. This is produced by template.
---
statefulset:
  name: nexusrepo-statefulset
  clusterName: nexusrepo-cluster
  replicaCount: 2
  container:
    imageName: registry.connect.redhat.com/sonatype/nexus-repository-manager:3.58.1-ubi-1
    resources:
      # See help documentation, these are minimum system requirements
      requests:
        cpu: 4
        memory: "8Gi"
      limits:
        cpu: 4
        memory: "8Gi"
    containerPort: 8081
    pullPolicy: IfNotPresent
    terminationGracePeriod: 20
    env:
      clustered: true
      install4jAddVmParams: "-Xms2703m -Xmx2703m"
      user: nexus
      password: nexus
      jdbcUrl: jdbc:postgresql://your_database_server:5432/nexus
      nexusInitialPassword: nexusabc
route:
  enabled: false
ingress:
  name: nexus-ingress
  enabled: false
  #host: "example.com" #host to apply this ingress rule to. Uncomment this in your values.yaml and set it as you wish
  dockerSubdomain: false # uncomment this if you'd like to create a wildcard rule in your ingress for docker sub domain routing. You should also make sure your create routing rules in your load balancer for sub domains of your host. Thus, you must also uncomment and set the host
  annotations:
    kubernetes.io/ingress.class: nginx
  dockerIngress:  #Ingress for Docker Connector - comment out if you don't use docker repositories
    name: nexus-docker-ingress
    #    host: "example.com"
    enabled: false
    annotations:
      kubernetes.io/ingress.class: nginx
nexusData:
  pv:
    directoryPrefix: /var/nexus-repo-mgr-work-dir/work
  pvc:
    size: 100Gi
    accessMode: ReadWriteOnce
  storageClass:
    name: nexusrepo-storage
    reclaimPolicy: Retain
  local:
    enabled: "true"
    accessMode: ReadWriteOnce
    storageClass:
      provisioner: kubernetes.io/no-provisioner
    pv:
      name: nexusrepo-local-storage-pv
      size: 200Gi
      matchNodes: "example-node-1 example-node-2 example-node-3"
  nfs:
    enabled: "false"
    accessMode: ReadWriteMany
    storageClass:
      provisioner: nfs-provisioner
    pv:
      name: nexusrepo-nfs-storage-pv
      size: 200Gi
      mountPath: /nexusdata/mountPath
      mountOptions:
        - hard
        - nfsvers=4.1
      server:
        ip: 70.71.156.85 #NFS server IP address
license:
  secretName: nexus-repo-license
  fileContentsBase64: your_license_file_contents_in_base_64

service:  #Nexus Repo NodePort Service
  nexus:
    name: nexus-repo-service
    enabled: false
    type: NodePort
    protocol: TCP
    port: 80
    targetPort: 8081
  docker:  #Nodeport Service for Docker Service
    name: nexus-repo-docker-service
    enabled: false
    type: NodePort
    protocol: TCP
    port: 9090
    targetPort: 8081